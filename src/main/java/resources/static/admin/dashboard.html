<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Codifica con Guali</title>
    <link rel="stylesheet" href="/css/admin.css">
</head>
<body>
    <div class="admin-container">
        <div class="admin-header">
            <h1>ü§ñ Panel de Administraci√≥n</h1>
            <div style="display: flex; gap: 15px; align-items: center;">
                <div class="admin-nav">
                    <a href="/admin/dashboard.html">Pistas</a>
                    <a href="/admin/users.html">Usuarios</a>
                    <a href="/admin/stats.html">Estad√≠sticas</a>
                    <a href="/admin/audit.html">Auditor√≠a</a>
                </div>
                <form action="/api/auth/logout" method="POST" style="margin: 0;">
                    <button type="submit" class="logout-btn">Cerrar Sesi√≥n</button>
                </form>
            </div>
        </div>

        <div class="admin-content">
            <h2>Gesti√≥n de Pistas</h2>
            <button class="btn-add" onclick="showCreateModal()">‚ûï Nueva Pista</button>
            
            <table id="tracksTable">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Dimensiones</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <!-- Create/Edit Modal -->
    <div id="trackModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Nueva Pista</h2>
                <button class="modal-close" onclick="closeModal()">‚úï</button>
            </div>
            
            <form id="trackForm">
                <input type="hidden" id="trackId">
                
                <div class="form-group">
                    <label for="trackName">Nombre de la Pista</label>
                    <input type="text" id="trackName" required>
                </div>
                
                <div class="form-group">
                    <label for="gridWidth">Ancho (columnas)</label>
                    <input type="number" id="gridWidth" value="5" min="3" max="10" onchange="generateGrid()">
                </div>
                
                <div class="form-group">
                    <label for="gridHeight">Alto (filas)</label>
                    <input type="number" id="gridHeight" value="4" min="3" max="10" onchange="generateGrid()">
                </div>
                
                <div class="form-group">
                    <label>Dise√±a el Camino (haz clic en las celdas verdes)</label>
                    <div id="gridEditor" class="grid-editor"></div>
                </div>
                
                <div class="form-group">
                    <label for="startX">Posici√≥n Inicial X</label>
                    <input type="number" id="startX" value="0" min="0">
                </div>
                
                <div class="form-group">
                    <label for="startY">Posici√≥n Inicial Y</label>
                    <input type="number" id="startY" value="0" min="0">
                </div>
                
                <div class="form-group">
                    <label for="startDirection">Direcci√≥n Inicial</label>
                    <select id="startDirection">
                        <option value="UP">Arriba</option>
                        <option value="RIGHT">Derecha</option>
                        <option value="DOWN">Abajo</option>
                        <option value="LEFT">Izquierda</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="isActive" checked> Pista activa
                    </label>
                </div>
                
                <button type="submit" class="btn btn-primary">Guardar Pista</button>
            </form>
        </div>
    </div>

    <script src="/js/admin-tracks.js"></script>
</body>
</html>